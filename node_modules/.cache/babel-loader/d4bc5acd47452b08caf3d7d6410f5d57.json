{"remainingRequest":"C:\\Users\\fabia\\Desktop\\esmad\\pw2\\projeto consumo\\ProjetoInterdisciplinar2\\ProjetoInterdisciplinar2\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\fabia\\Desktop\\esmad\\pw2\\projeto consumo\\ProjetoInterdisciplinar2\\ProjetoInterdisciplinar2\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\fabia\\Desktop\\esmad\\pw2\\projeto consumo\\ProjetoInterdisciplinar2\\ProjetoInterdisciplinar2\\src\\services\\auth.service.js","dependencies":[{"path":"C:\\Users\\fabia\\Desktop\\esmad\\pw2\\projeto consumo\\ProjetoInterdisciplinar2\\ProjetoInterdisciplinar2\\src\\services\\auth.service.js","mtime":1622813487095},{"path":"C:\\Users\\fabia\\Desktop\\esmad\\pw2\\projeto consumo\\ProjetoInterdisciplinar2\\ProjetoInterdisciplinar2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\fabia\\Desktop\\esmad\\pw2\\projeto consumo\\ProjetoInterdisciplinar2\\ProjetoInterdisciplinar2\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\fabia\\Desktop\\esmad\\pw2\\projeto consumo\\ProjetoInterdisciplinar2\\ProjetoInterdisciplinar2\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL2ZhYmlhL0Rlc2t0b3AvZXNtYWQvcHcyL3Byb2pldG8gY29uc3Vtby9Qcm9qZXRvSW50ZXJkaXNjaXBsaW5hcjIvUHJvamV0b0ludGVyZGlzY2lwbGluYXIyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IEFQSV9VUkwgZnJvbSAnLi9jb25maWcuanMnOwpleHBvcnQgdmFyIEF1dGhTZXJ2aWNlID0gewogIGxvZ2luOiBmdW5jdGlvbiBsb2dpbih1c2VyKSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgcmVzcG9uc2UsIGRhdGE7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gZmV0Y2goIiIuY29uY2F0KEFQSV9VUkwsICIvc2lnbmluIiksIHsKICAgICAgICAgICAgICAgIG1ldGhvZDogIlBPU1QiLAogICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtOCIKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLAogICAgICAgICAgICAgICAgICBwYXNzd29yZDogdXNlci5wYXNzd29yZAogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBkYXRhID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygiTE9HSU4gU0VSVklDRSBPSyIpCiAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YSkKICAgICAgICAgICAgICBpZiAoZGF0YS5hY2Nlc3NUb2tlbikgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXInLCBKU09OLnN0cmluZ2lmeShkYXRhKSk7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgZGF0YSk7CgogICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIEVycm9yKGhhbmRsZVJlc3BvbnNlcyhyZXNwb25zZS5zdGF0dXMpKSk7CgogICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSgpOwogIH0sCiAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoKSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndXNlcicpOwoKICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTIpOwogICAgfSkpKCk7CiAgfSwKICByZWdpc3RlcjogZnVuY3Rpb24gcmVnaXN0ZXIodXNlcikgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgIHZhciByZXNwb25zZSwgZGF0YTsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIGZldGNoKCIiLmNvbmNhdChBUElfVVJMLCAiL3NpZ251cCIpLCB7CiAgICAgICAgICAgICAgICBtZXRob2Q6ICJQT1NUIiwKICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTgiCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICAgICAgICB1c2VybmFtZTogdXNlci51c2VybmFtZSwKICAgICAgICAgICAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsCiAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiB1c2VyLnBhc3N3b3JkCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQzLnNlbnQ7CgogICAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNjsKICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwoKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIGRhdGEgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgZGF0YSk7CgogICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgIHRocm93IEVycm9yKGhhbmRsZVJlc3BvbnNlcyhyZXNwb25zZS5zdGF0dXMpKTsKCiAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMyk7CiAgICB9KSkoKTsKICB9Cn07CgpmdW5jdGlvbiBoYW5kbGVSZXNwb25zZXMoY29kZSkgewogIHZhciBtZXNzYWdlID0gIiI7CgogIHN3aXRjaCAoY29kZSkgewogICAgY2FzZSA0MDA6CiAgICAgIG1lc3NhZ2UgPSAiVXNlcm5hbWUgYWxyZWFkeSBleGlzdHMuIjsKICAgICAgYnJlYWs7CgogICAgY2FzZSA0MDE6CiAgICAgIG1lc3NhZ2UgPSAiV3JvbmcgY3JlZGVudGlhbHMiOwogICAgICBicmVhazsKCiAgICBjYXNlIDQwNDoKICAgICAgbWVzc2FnZSA9ICJVc2VyIG5vdCBmb3VuZCI7CiAgICAgIGJyZWFrOwoKICAgIGRlZmF1bHQ6CiAgICAgIG1lc3NhZ2UgPSAiVW5rb3duIG1lc3NhZ2UiOwogICAgICBicmVhazsKICB9CgogIHJldHVybiBtZXNzYWdlOwp9CgpleHBvcnQgZGVmYXVsdCBBdXRoU2VydmljZTs="},{"version":3,"sources":["C:/Users/fabia/Desktop/esmad/pw2/projeto consumo/ProjetoInterdisciplinar2/ProjetoInterdisciplinar2/src/services/auth.service.js"],"names":["API_URL","AuthService","login","user","fetch","method","headers","body","JSON","stringify","email","password","response","ok","json","data","accessToken","localStorage","setItem","Error","handleResponses","status","logout","removeItem","register","username","code","message"],"mappings":";;;AAAA,OAAOA,OAAP,MAAoB,aAApB;AAEA,OAAO,IAAMC,WAAW,GAAG;AACjBC,EAAAA,KADiB,iBACXC,IADW,EACL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACSC,KAAK,WAAIJ,OAAJ,cAAsB;AAC9CK,gBAAAA,MAAM,EAAE,MADsC;AAE9CC,gBAAAA,OAAO,EAAE;AACL,kCAAgB;AADX,iBAFqC;AAK9CC,gBAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACjBC,kBAAAA,KAAK,EAAEP,IAAI,CAACO,KADK;AAEjBC,kBAAAA,QAAQ,EAAER,IAAI,CAACQ;AAFE,iBAAf;AALwC,eAAtB,CADd;;AAAA;AACRC,cAAAA,QADQ;;AAAA,mBAWVA,QAAQ,CAACC,EAXC;AAAA;AAAA;AAAA;;AAAA;AAAA,qBAYSD,QAAQ,CAACE,IAAT,EAZT;;AAAA;AAYJC,cAAAA,IAZI;AAaV;AACA;AACA,kBAAIA,IAAI,CAACC,WAAT,EACIC,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BV,IAAI,CAACC,SAAL,CAAeM,IAAf,CAA7B;AAhBM,+CAiBHA,IAjBG;;AAAA;AAAA,+CAmBHI,KAAK,CAACC,eAAe,CAACR,QAAQ,CAACS,MAAV,CAAhB,CAnBF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAqBjB,GAtBsB;AAwBjBC,EAAAA,MAxBiB,oBAwBR;AAAA;AAAA;AAAA;AAAA;AAAA;AACXL,cAAAA,YAAY,CAACM,UAAb,CAAwB,MAAxB;;AADW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEd,GA1BsB;AA4BjBC,EAAAA,QA5BiB,oBA4BRrB,IA5BQ,EA4BF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACMC,KAAK,WAAIJ,OAAJ,cAAsB;AAC9CK,gBAAAA,MAAM,EAAE,MADsC;AAE9CC,gBAAAA,OAAO,EAAE;AACL,kCAAgB;AADX,iBAFqC;AAK9CC,gBAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACjBgB,kBAAAA,QAAQ,EAAEtB,IAAI,CAACsB,QADE;AAEjBf,kBAAAA,KAAK,EAAEP,IAAI,CAACO,KAFK;AAGjBC,kBAAAA,QAAQ,EAAER,IAAI,CAACQ;AAHE,iBAAf;AALwC,eAAtB,CADX;;AAAA;AACXC,cAAAA,QADW;;AAAA,mBAYbA,QAAQ,CAACC,EAZI;AAAA;AAAA;AAAA;;AAAA;AAAA,qBAaMD,QAAQ,CAACE,IAAT,EAbN;;AAAA;AAaPC,cAAAA,IAbO;AAAA,gDAcNA,IAdM;;AAAA;AAAA,oBAgBPI,KAAK,CAACC,eAAe,CAACR,QAAQ,CAACS,MAAV,CAAhB,CAhBE;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAkBpB;AA9CsB,CAApB;;AAkDP,SAASD,eAAT,CAAyBM,IAAzB,EAA+B;AAC3B,MAAIC,OAAO,GAAG,EAAd;;AACA,UAAQD,IAAR;AACI,SAAK,GAAL;AACIC,MAAAA,OAAO,GAAG,0BAAV;AACA;;AACJ,SAAK,GAAL;AACIA,MAAAA,OAAO,GAAG,mBAAV;AACA;;AACJ,SAAK,GAAL;AACIA,MAAAA,OAAO,GAAG,gBAAV;AACA;;AACJ;AACIA,MAAAA,OAAO,GAAG,gBAAV;AACA;AAZR;;AAcA,SAAOA,OAAP;AACH;;AAED,eAAe1B,WAAf","sourcesContent":["import API_URL from './config.js'\r\n\r\nexport const AuthService = {\r\n    async login(user) { // payload = user (username + password)\r\n        const response = await fetch(`${API_URL}/signin`, {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json;charset=utf-8\"\r\n            },\r\n            body: JSON.stringify({\r\n                email: user.email,\r\n                password: user.password\r\n            })\r\n        });\r\n        if (response.ok) {\r\n            const data = await response.json();\r\n            // console.log(\"LOGIN SERVICE OK\")\r\n            // console.log(data)\r\n            if (data.accessToken)\r\n                localStorage.setItem('user', JSON.stringify(data));\r\n            return data;\r\n        } else {\r\n            return Error(handleResponses(response.status));\r\n        }\r\n    },\r\n\r\n    async logout() {\r\n        localStorage.removeItem('user');\r\n    },\r\n\r\n    async register(user) {\r\n        const response = await fetch(`${API_URL}/signup`, {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json;charset=utf-8\"\r\n            },\r\n            body: JSON.stringify({\r\n                username: user.username,\r\n                email: user.email,\r\n                password: user.password\r\n            })\r\n        });\r\n        if (response.ok) {\r\n            const data = await response.json();\r\n            return data;\r\n        } else {\r\n            throw Error(handleResponses(response.status));\r\n        }\r\n    }\r\n}\r\n\r\n\r\nfunction handleResponses(code) {\r\n    let message = \"\";\r\n    switch (code) {\r\n        case 400:\r\n            message = \"Username already exists.\";\r\n            break;\r\n        case 401:\r\n            message = \"Wrong credentials\";\r\n            break;\r\n        case 404:\r\n            message = \"User not found\";\r\n            break;\r\n        default:\r\n            message = \"Unkown message\";\r\n            break;\r\n    }\r\n    return message;\r\n}\r\n\r\nexport default AuthService;"]}]}